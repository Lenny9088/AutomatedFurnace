alias furnace d0
alias tempMem d1
alias pressureMem d2
alias inflow d3
alias outflow d4
alias currentTemp r0
alias currentPressure r1
alias maxTemp r2
alias maxPressure r3
alias ticks r4

s inflow Setting 5

waitActive:
yield
s outflow Setting 100
s inflow On 0
l maxTemp tempMem Setting 
l maxPressure pressureMem Setting 
l currentPressure furnace Pressure

bgt maxTemp 100 heat
add ticks 1 ticks

brgt ticks 40 2
s outflow On 0

brlt ticks 40 5
breq currentPressure 0 3
s outflow On 1
j waitActive
s outflow On 0

j waitActive

heat:
move ticks 0
s outflow Setting 50
s furnace Activate 1
yield
s furnace Activate 0

l maxTemp tempMem Setting 
l currentTemp furnace Temperature
l currentPressure furnace Pressure

blt maxTemp 100 waitActive
bgt currentPressure maxPressure vent
s outflow On 0

bgt currentTemp maxTemp stopFuel
s inflow On 1
j heat

vent:
s outflow On 1
j stopFuel

stopFuel:
s inflow On 0
j heat